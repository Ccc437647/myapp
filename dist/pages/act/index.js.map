{"version":3,"file":"pages/act/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;;;;;;;;;;;;;ACHA;AACA;AACA;;;;;;;;;;;;;ACFA;AACA;AACA;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://myapp/./src/pages/act/index.tsx?d940","webpack://myapp/._src_pages_act_index.tsx","webpack://myapp/._node_modules_@babel_runtime_helpers_esm_arrayWithoutHoles.js","webpack://myapp/._node_modules_@babel_runtime_helpers_esm_iterableToArray.js","webpack://myapp/._node_modules_@babel_runtime_helpers_esm_nonIterableSpread.js","webpack://myapp/._node_modules_@babel_runtime_helpers_esm_toConsumableArray.js"],"sourcesContent":["import _regeneratorRuntime from \"E:/code/myapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _toConsumableArray from \"E:/code/myapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"E:/code/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"E:/code/myapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"E:/code/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport Taro from '@tarojs/taro';\nimport { useEffect, useState, useCallback } from 'react';\nimport { View, Text, Input, Form, Image } from '../../components/cross-platform';\nimport { apiLogin } from '../../request/user';\nimport './index.scss';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Act() {\n  var _Taro$Current$router;\n  // 获取页面路径\n  var path = (_Taro$Current$router = Taro.Current.router) === null || _Taro$Current$router === void 0 ? void 0 : _Taro$Current$router.path;\n  // 用户信息\n  var _useState = useState({\n      name: '309324904@qq.com',\n      password: '123456',\n      address: '',\n      photoList: []\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    formData = _useState2[0],\n    setFormData = _useState2[1];\n  // 页面切换 快速清空表单数据\n  useEffect(function () {\n    return function () {\n      // 清空表单数据\n      setFormData({\n        name: '',\n        password: '',\n        address: '',\n        photoList: []\n      });\n    };\n  }, [path]);\n\n  // 修改姓名\n  var nameChangeHandler = function nameChangeHandler(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      name: e.detail.value\n    }));\n  };\n  // 修改密码\n  var passwordChangeHandler = function passwordChangeHandler(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      password: e.detail.value\n    }));\n  };\n  // 修改收货地址\n  var addressChangeHandler = function addressChangeHandler(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      address: e.detail.value\n    }));\n  };\n  // 点击上传图片\n  var chooseImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _yield$Taro$chooseIma, tempFilePaths;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Taro.chooseImage({\n              count: 6,\n              // 默认9\n              sizeType: ['original', 'compressed'],\n              // 可以指定是原图还是压缩图\n              sourceType: ['album', 'camera'] // 可以指定来源是相册还是相机\n            });\n          case 2:\n            _yield$Taro$chooseIma = _context.sent;\n            tempFilePaths = _yield$Taro$chooseIma.tempFilePaths;\n            setFormData(function (prevFormData) {\n              return _objectSpread(_objectSpread({}, prevFormData), {}, {\n                photoList: [].concat(_toConsumableArray(prevFormData.photoList), _toConsumableArray(tempFilePaths))\n              });\n            });\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function chooseImage() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  // 请求 - 用户登录\n  var getLoginMsg = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var _yield$apiLogin, code, result;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return apiLogin(formData.name, formData.password);\n        case 2:\n          _yield$apiLogin = _context2.sent;\n          code = _yield$apiLogin.code;\n          result = _yield$apiLogin.result;\n          if (!(code !== 200)) {\n            _context2.next = 7;\n            break;\n          }\n          return _context2.abrupt(\"return\", console.log('账户密码错误'));\n        case 7:\n          // 存储token\n          Taro.setStorage({\n            key: 'token',\n            data: result.token\n          });\n          // 存储个人信息\n          Taro.setStorage({\n            key: 'userInfo',\n            data: result\n          });\n          // 跳转到个人中心\n          Taro.switchTab({\n            url: '/pages/user/index'\n          });\n          // 清空表单数据\n          setFormData({\n            name: '',\n            password: '',\n            address: '',\n            photoList: []\n          });\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  })), [formData.name, formData.password]);\n\n  // 信息提交 - 用户登录\n  var submitForm = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            getLoginMsg();\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n    return function submitForm() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsx(View, {\n    altClassName: \"min-h-full px-4 py-10\",\n    children: /*#__PURE__*/_jsxs(Form, {\n      altClassName: \"\",\n      children: [/*#__PURE__*/_jsxs(View, {\n        altClassName: \"flex flex-row flex-nowrap justify-around items-center mb-4\",\n        children: [/*#__PURE__*/_jsx(Text, {\n          altClassName: \"w-20\",\n          children: \"\\u7528\\u6237\\u540D\"\n        }), /*#__PURE__*/_jsx(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n          maxlength: 20,\n          value: formData.name,\n          onInput: nameChangeHandler,\n          altClassName: \"flex-1 border-solid border-2 border-r-slate-600 rounded-3xl pl-8 \"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        altClassName: \"flex flex-row flex-nowrap justify-around items-center mb-4\",\n        children: [/*#__PURE__*/_jsx(Text, {\n          altClassName: \"w-20\",\n          children: \"\\u5BC6\\u7801\"\n        }), /*#__PURE__*/_jsx(Input, {\n          type: \"password\",\n          password: true,\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n          maxlength: 16,\n          value: formData.password,\n          onInput: passwordChangeHandler,\n          altClassName: \"flex-1 border-solid border-2 border-r-slate-600 rounded-3xl pl-8 \"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        altClassName: \"flex flex-row flex-nowrap justify-around items-center mb-4\",\n        children: [/*#__PURE__*/_jsx(Text, {\n          altClassName: \"w-20\",\n          children: \"\\u6536\\u8D27\\u5730\\u5740\"\n        }), /*#__PURE__*/_jsx(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u6536\\u8D27\\u5730\\u5740\",\n          value: formData.address,\n          onInput: addressChangeHandler,\n          altClassName: \"flex-1 border-solid border-2 border-r-slate-600 rounded-3xl pl-8 \"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        altClassName: \"flex flex-row flex-nowrap justify-around items-center mb-4\",\n        children: [/*#__PURE__*/_jsx(Text, {\n          altClassName: \"w-20\",\n          children: \"\\u4E0A\\u4F20\\u56FE\\u7247\"\n        }), /*#__PURE__*/_jsxs(View, {\n          altClassName: \"flex-1  flex-row  flex-wrap flex\",\n          children: [formData.photoList.map(function (item, index) {\n            return /*#__PURE__*/_jsx(View, {\n              altClassName: \"  w-20 h-20 mb-0.5 mr-0.5\",\n              children: /*#__PURE__*/_jsx(Image, {\n                altClassName: \" w-20 h-20 bg-teal-300 \",\n                src: item\n              })\n            }, index);\n          }), formData.photoList.length < 6 && /*#__PURE__*/_jsx(View, {\n            altClassName: \"w-20 h-20 bg-red-600\",\n            onClick: chooseImage,\n            children: \"+\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(View, {\n        type: \"submit\",\n        value: \"\\u63D0\\u4EA4\",\n        onClick: submitForm,\n        altClassName: \"bg-yellow-300 rounded-3xl w-32 h-7 leading-7 text-center m-auto text-gray-900 \",\n        children: \"\\u70B9\\u51FB\\u63D0\\u4EA4\"\n      })]\n    })\n  });\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/act/index!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"活动页面\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/act/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}"],"names":[],"sourceRoot":""}